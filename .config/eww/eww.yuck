(defvar showLauncher false)

(defwidget launcher []
  (eventbox
    :onhover "eww update showLauncher=true"
    :onhoverlost "eww update showLauncher=false"
    (box
      :space-evenly false
      :spacing 8
      (label
        :class "launcher-element"
        :text "󰣇"
      )
      (revealer
        :transition "slideright"
        :reveal showLauncher
        :duration "500ms"
        (box
          :spacing 9
          (button
            :onclick "~/.local/bin/programs/terminal.sh"
            (label
              :class "launcher-element"
              :text ""
            )
          )
          (button
            :onclick "~/.local/bin/programs/fileManager.sh"
            (label
              :class "launcher-element"
              :text "󰉋"
            )
          )
          (button
            :onclick "~/.local/bin/programs/browser.sh"
            (label
              :class "launcher-element"
              :text "󰈹"
            )
          )
        )
      )
    )
  )
)

(defwidget window []
  (box :class "window" :spacing 8 "Window")
)

(defwidget music []
  (box "Music")
)

(defwidget workspaces []
  (box "Workspaces")
)

(defwidget tray []
  (box "Systray")
)

(defwidget volume []
  (box "Volume")
)

(defwidget brightness []
  (box "brightness")
)

(defwidget network []
  (box "Network")
)

(defwidget bluetooth []
  (box "Bluetooth")
)

(defwidget battery []
  (box "Battery")
)

(defwidget clock []
  (box "Clock")
)

(defwidget power []
  (box "Power")
)

(defwidget left []
  (box
    :class "left"
    :halign "start"
    :space-evenly false
    :spacing 8
    (launcher)
    (window)
    (music)
  )
)

(defwidget center []
  (box
    :class "center"
    :halign "center"
    :space-evenly false
    :spacing 8
    (workspaces)
  )
)

(defwidget right []
  (box
    :class "right"
    :halign "end"
    :space-evenly false
    :spacing 8
    (tray)
    (volume)
    (brightness)
    (network)
    (bluetooth)
    (battery)
    (clock)
    (power)
  )
)

(defwindow bar
  :monitor 0
  :geometry (geometry
    :x "0%"
    :y "0%"
    :width "99%"
    :height "30px"
    :anchor "top center"
  )
  :stacking "fg"
  :exclusive true
  :namespace "eww-bar"
  (box
    :spacing 0
    :space-evenly true
      (left)
      (center)
      (right)
  )
)
